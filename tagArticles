<!doctype html>
<html lang="en">

<head>
  <title>FGh.io</title>
  
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <link rel="preload" as="style" href="assets/css/default.css">

  <link rel="stylesheet" type="text/css" href="assets/css/default.css" />

  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.2/css/all.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=PT+Sans+Narrow:wght@400;700&amp;family=PT+Serif">


  <style>body>.footer,body>.navbar,body>.section{opacity:0}</style>

  <script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'G-EJY6FXZBCB');
  </script>

  <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
  <script src="./assets/js/commonFunctions.js"></script>
  
  <script>
    $(document).ready(function () {

      function showPreview() {

        tagsPreview.empty();

        // create the preview
        blogCardsHavingThatTag.forEach((val, i) => {
          const postTitle = val.replace(/\.html$/, '');
          const postContent = loadIndividualBlogPost(postTitle);
          const postDate = extractPostDate(postContent);
          const lastUpdated = extractLastUpdated(postContent);
          
          const postDateDMY = formatDateToDDMMYYYY(postDate);
          const lastUpdatedDMY = formatDateToDDMMYYYY(lastUpdated);
          
          const readTime = extractReadTime(postContent);
          const wordCount = extractWordCount(postContent);

          let tagsHTML = '';
          const tags = extractTags(postContent);

          if (Array.isArray(tags)) {
            const tagLinks = tags.map(tag => 
              `<a class="link-muted" rel="tag" href="./tags/">${tag}</a>`);
            tagsHTML = tagLinks.join(';&nbsp;');
          }

          const cardHTML = `
            <div class="card" id="${postTitle}-card" 
              data-post-title="${postTitle}" style="opacity: 1;">
              <article class="card-content article" role="article">
                <h1 class="title is-size-3" style="font-family: 'PT Sans Narrow', sans-serif">
                  <a class="has-link-black-ter" href="blogPost.html?post=${postTitle}">
                    ${postTitle}
                  </a>
                </h1>
                <div class="article-meta is-size-7 is-uppercase level is-mobile">
                  <div class="level-left" style="margin-bottom: 0.50rem">
                    <span class="level-item">
                      <i class="far fa-calendar-alt">&nbsp;</i>
                      <time datetime="${postDate}" title="${postDate}">
                        ${postDateDMY}
                      </time>
                    </span>
                    <span class="level-item is-hidden-mobile">
                      <i class="far fa-calendar-check">&nbsp;</i>
                      <time datetime="${lastUpdated}" title="${lastUpdated}">
                        ${lastUpdatedDMY}
                      </time>
                    </span>
                    <span class="level-item">
                      <i class="far fa-folder-open has-text-grey"></i>&nbsp;
                      <a class="link-muted" href="./blog">blog</a>
                    </span>
                    <span class="level-item">
                      <i class="far fa-clock"></i>&nbsp;Estimated read time: 
                        ${readTime} (About ${wordCount} words)
                    </span>
                  </div>
                </div>
                <div class="content" style="margin-top: 1.0rem">
                  One of the Most Widely Used Estimation Methods
                </div>
                <hr style="height:1px;margin:1rem 0">
                <div class="level is-mobile is-flex">
                  <div class="article-tags is-size-7 is-uppercase">
                    <i class="fas fa-tag has-text-grey"
                      style="transform: translateY(20%);"></i>&nbsp&nbsp;
                    <div>
                      ${tagsHTML}
                    </div>
                  </div>
                  <a class="article-more button is-small is-size-7" 
                    href="blogPost.html?post=${postTitle}">
                    <i class="fas fa-book-reader has-text-grey"></i>&nbsp;&nbsp;Read more
                  </a>
                </div>
              </article>
            </div>
          `;

          // Check if there are already cards and add margin-top if needed
          if (tagsPreview.find('.card').length > 0) {
            cardHTMLInstance = '<div style="margin-top: 20px;">' + cardHTML + '</div>';
          } else {
            cardHTMLInstance = cardHTML;
          }

          tagsPreview.append(cardHTMLInstance);
        });
      }


      function loadBlogCards() {
        $.ajax({
          url: './blogCards/', // place where the blogCards are located
          success: function (data) {
            blogCardsHavingThatTag = [];
            $(data)
              .find('a')
              .attr('href', function (i, val) {
                if (val.match(/\.(html)$/)) {
                  const postTitle = val.replace(/\.html$/, '');
                  const postContent = loadIndividualBlogPost(postTitle);
                  const tags = extractTags(postContent);

                  if (Array.isArray(tags) && tags.includes(tagId)) {
                    blogCardsHavingThatTag.push(val);
                  }
                }
              });

            // Sort blogCards based on lastUpdated property (most recent to oldest)
            blogCardsHavingThatTag.sort(function (a, b) {
              const postTitleA = a.replace(/\.html$/, '');
              const postTitleB = b.replace(/\.html$/, '');
              const postContentA = loadIndividualBlogPost(postTitleA);
              const postContentB = loadIndividualBlogPost(postTitleB);
              const lastUpdatedA = extractLastUpdated(postContentA);
              const lastUpdatedB = extractLastUpdated(postContentB);
              return new Date(lastUpdatedB) - new Date(lastUpdatedA);
            });

            console.log(blogCardsHavingThatTag);

            // Load and display the first page of blog cards
            showPreview();
          }
        });
      }

      // Retrieve the tag ID from the URL
      const tagId = getQueryParam('tag');

      // Display the tag breadcrumb
      const tagBreadcrumb = $('.breadcrumb .is-active-tag p');
      tagBreadcrumb.text(tagId);

      const tagsPreview = $('#tag-articles-preview');
      loadBlogCards();

    });

  </script>
    
</head>

<body class="pace-done is-3-column light" data-new-gr-c-s-check-loaded="14.1134.0" data-gr-ext-installed>

  <div class="pace pace-inactive">
    <div class="pace-progress" data-progress-text="100%" data-progress="99" style="transform: translate3d(100%, 0px, 0px);">
      <div class="pace-progress-inner"></div>
    </div>
    <div class="pace-activity"></div>
  </div>

  <!-- NAVIGATION BAR -->
  <div data-include="./common/navBar"></div>
  
  <section class=section style="opacity: 1;">

    <div class="container">
      <div class="columns">

        <!-- CENTRAL PANE -->
        <div class="column order-2 column-main is-8-tablet is-8-desktop is-6-widescreen">

          <div class="card" style="opacity: 1;">
            <div class="card-content">
              <nav class="breadcrumb" aria-label="breadcrumbs">
                <ul>
                  <li>
                    <a href="./tags">Tags</a>
                  </li>
                  <li class="is-active-tag">
                    <p style="padding-left: 8pt;">
                      ${tagId}
                    </p>
                  </li>
                </ul>
              </nav>
            </div>
          </div>

          <div id="tag-articles-preview" style="padding-top: 20px;">
            <!-- insert the card preview here -->

          </div>
          
        </div>


        <!-- LEFT PANE -->
        <div class="column column-left is-4-tablet is-4-desktop is-3-widescreen order-1 is-sticky">
          <div data-include="./common/leftPane"></div>
        </div>

        <!-- RIGHT PANE -->
        <div class="column column-right is-4-tablet is-4-desktop is-3-widescreen order-3 is-sticky">
          <div data-include="./common/rightPane"></div>
        </div>

      </div>
    </div>

    <a id="back-to-top" 
      title="Back to top" 
      href="javascript:void(0);" 
      style="right: 500px; bottom: 35px; width: 50px;" 
      class="card has-text-centered">
      <i class="fas fa-chevron-up"></i>
    </a>

    <script src="./assets/js/back-to-top.js"></script>

  </section>

  <!-- FOOTER -->
  <div data-include="./common/footer"></div>

  <script src="assets/js/columns.js"></script>
  <!--<script src="assets/js/animation.js"></script>-->

  <script src="assets/js/script.js"></script>
  <script src="assets/js/main.js"></script>

</body>

<script>
  $(function () {
    var includes = $('[data-include]')
    $.each(includes, function() {
      var file = $(this).data('include')
      $(this).load(file)
    })
  })
</script>

</html>

